# Sistema de An√°lise de Padr√µes de Roleta com IA

## Overview

Sistema completo e avan√ßado de an√°lise de padr√µes de roleta com intelig√™ncia artificial desenvolvido em TypeScript. O sistema oferece an√°lise em tempo real de resultados da roleta europeia, gera√ß√£o autom√°tica de estrat√©gias de apostas baseadas em IA, reconhecimento de padr√µes estat√≠sticos e sistema configur√°vel de prefer√™ncias de apostas. A interface inclui mesa visual id√™ntica √† roleta europeia original com interface simplificada focada apenas em cliques diretos.

## User Preferences

- **Comunica√ß√£o**: Portugu√™s, linguagem simples e cotidiana
- **Interface**: Dashboard profissional com tema escuro tipo casino
- **Funcionalidades**: Foco em estrat√©gias autom√°ticas e an√°lise de padr√µes

## Estado Atual (29 de Julho 2025) - INTERFACE OTIMIZADA E COMPACTA

### üéØ √öLTIMA ALTERA√á√ÉO: Interface Compacta e Harm√¥nica (29 Jul 2025)

**Mudan√ßa Implementada:**
- ‚úÖ **Interface Totalmente Otimizada** para vers√£o compacta e harm√¥nica
- ‚úÖ **Layout Responsivo** adaptativo para qualquer tipo de tela
- ‚úÖ **Componentes Otimizados** - betting-recommendations.tsx, ml-analysis-panel.tsx, external-ai-panel.tsx
- ‚úÖ **Dashboard Principal Compacto** - header reduzido, espa√ßamentos otimizados
- ‚úÖ **Elementos Visuais Reduzidos** - textos menores, bot√µes compactos, gaps reduzidos
- ‚úÖ **Experi√™ncia Harm√¥nica** - consist√™ncia visual em todos os componentes

**Caracter√≠sticas da Nova Interface:**
- **Header Compacto**: Altura reduzida de 64px para 56px, textos menores
- **Componentes Harmonizados**: Espa√ßamentos consistentes, tamanhos padronizados
- **Layout em Grid Otimizado**: Melhor aproveitamento do espa√ßo dispon√≠vel
- **Responsividade Aprimorada**: Funciona perfeitamente em mobile, tablet e desktop
- **Visual Limpo**: Foco no conte√∫do essencial, sem elementos desnecess√°rios

### üöÄ NOVA ARQUITETURA: Sistema SaaS com 3 Planos - ‚úÖ IMPLEMENTADA

**Sistema de Controle de Acesso Implementado:**
- **Autentica√ß√£o**: Sistema completo de usu√°rios com planos
- **3 Planos Dispon√≠veis**: B√°sico, Intermedi√°rio e Completo
- **Controle Granular**: Cada funcionalidade restrita por plano espec√≠fico
- **Interface de Planos**: P√°gina dedicada para sele√ß√£o e upgrade
- **FeatureGuard**: Componente que bloqueia funcionalidades baseado no plano
- **Header Informativo**: Mostra usu√°rio atual e plano ativo

**Estrutura dos Planos:**

**üì¶ Plano B√°sico (R$ 29/m√™s)**
- Mesa de roleta visual interativa (cliques diretos)
- Hist√≥rico de resultados
- Estat√≠sticas b√°sicas
- Sistema de sess√µes

**üì¶ Plano Intermedi√°rio (R$ 59/m√™s)**
- Tudo do Plano B√°sico +
- An√°lise de padr√µes avan√ßada
- Estrat√©gias tradicionais  
- Machine Learning b√°sico
- Gr√°ficos interativos
- Sistema de alertas

**üì¶ Plano Completo (R$ 99/m√™s)**
- Tudo do Plano Intermedi√°rio +
- **IA Externa (ChatGPT + Claude)**
- **Estrat√©gias combinadas** 
- **Gr√°ficos avan√ßados**
- **Dashboard customiz√°vel**
- Exporta√ß√£o de dados
- Hist√≥rico completo
- Suporte priorit√°rio

### ‚úÖ Funcionalidades Principais Implementadas

**Mesa de Roleta e Interface - OTIMIZADA E COMPACTA**
- **Interface Totalmente Compacta**: Layout harmonioso adaptativo para qualquer tela
- **Header Otimizado**: Reduzido para 56px de altura, elementos essenciais apenas
- **Mesa de Roleta Europeia**: Layout limpo e responsivo com cliques diretos
- **Componentes Harmonizados**: betting-recommendations, ml-analysis, external-ai compactos
- **√öltimos Resultados**: Display reduzido para 8x8px, 12 n√∫meros m√°ximo
- **Espa√ßamentos Consistentes**: gap-4 para se√ß√µes, gap-2 para elementos internos
- **Texto Otimizado**: Tamanhos reduzidos (text-sm, text-xs) para melhor densidade
- **Bot√µes Compactos**: size="sm" padronizado, √≠cones 3x3 ou 4x4
- **Visual Harmonioso**: Consist√™ncia de cores, bordas e fundos em todos componentes

**üöÄ NOVA: An√°lise com IA Externa - ‚úÖ IMPLEMENTADA**
- **Integra√ß√£o ChatGPT**: An√°lise avan√ßada via OpenAI GPT-4o
- **Integra√ß√£o Claude**: An√°lise avan√ßada via Anthropic Claude-4
- **Interface Visual**: Painel dedicado "üöÄ An√°lise com IA Externa"
- **An√°lise Paralela**: Consulta simult√¢nea a ambos os sistemas de IA
- **Insights √önicos**: Detec√ß√£o de padr√µes que algoritmos locais podem perder
- **Recomenda√ß√µes Personalizadas**: Top 7 n√∫meros com racioc√≠nio detalhado
- **Confian√ßa Medida**: Percentual de certeza de cada an√°lise (0-100%)
- **Padr√µes Detectados**: Lista de tend√™ncias identificadas pela IA
- **Pr√≥ximos Prov√°veis**: Previs√µes com probabilidades espec√≠ficas

**üéØ NOVA: Previs√µes ML Simplificadas - ‚úÖ OTIMIZADA**
- **N√∫meros Plenos ML**: Top 7 n√∫meros com n√∫mero principal destacado
- **Vizinhos ML**: 5 n√∫meros da roda f√≠sica com principal no centro
- **Interface Limpa**: Apenas n√∫meros jog√°veis, sem porcentagens desnecess√°rias
- **Visual Intuitivo**: Anel roxo destaca n√∫meros principais
- **An√°lise R√°pida**: M√©tricas essenciais em formato compacto

**Sistema de An√°lise com IA - Fase 1 ‚úÖ**
- Engine de an√°lise de padr√µes em tempo real
- Detec√ß√£o autom√°tica de n√∫meros quentes/frios
- An√°lise de sequ√™ncias de d√∫zias, cores e paridades
- C√°lculos de probabilidade e confian√ßa estat√≠stica
- An√°lise client-side complementar para performance
- **Machine Learning Analyzer** com confidence scoring avan√ßado
- **Previs√µes ML** baseadas em padr√µes temporais e frequ√™ncia
- **Classifica√ß√£o autom√°tica** de n√∫meros em categorias hot/cold/neutral
- **Painel dedicado** "üéØ RECOMENDA√á√ïES DE APOSTAS" no topo da barra lateral
- **Se√ß√£o roxa** "Previs√µes de IA (L√≥gica ML Avan√ßada)" com Top 10 n√∫meros

**Estrat√©gias Automatizadas - Fase 2 ‚úÖ**
- **N√∫meros Plenos**: Gera√ß√£o de exatamente 7 n√∫meros por rodada
- **Vizinhos**: Cobertura de at√© 21 n√∫meros por estrat√©gia
- **Rec√°lculo Inteligente**: Nova estrat√©gia ap√≥s 5 tentativas falhadas
- **Valida√ß√£o Cr√≠tica**: Estrat√©gias s√≥ ativam com m√≠nimo de 10 resultados
- **Algoritmo Adaptativo**: Ajuste baseado em n√∫meros quentes/frios
- **NOVO**: Estrat√©gias Combinadas Inteligentes com otimiza√ß√£o de portf√≥lio
- **NOVO**: Aloca√ß√£o autom√°tica de percentuais entre diferentes tipos de apostas
- **NOVO**: An√°lise de risco/retorno com m√©tricas de confian√ßa
- **NOVO**: Estrat√©gias que adaptam baseado em performance ML

**Interface e Experi√™ncia - Fase 3 ‚úÖ**
- Gr√°ficos interativos avan√ßados com 4 visualiza√ß√µes (Frequ√™ncia, Tend√™ncias, Setores, Sequ√™ncias)
- Dashboard totalmente customiz√°vel com layouts predefinidos
- Sistema de altern√¢ncia entre dashboard padr√£o e customiz√°vel
- Pain√©is reorganiz√°veis por categoria (An√°lise, Estrat√©gias, Estat√≠sticas, Visualiza√ß√£o)
- Layouts prontos: Iniciante, Avan√ßado, Analista, Estrategista
- **Painel de Recomenda√ß√µes de Apostas** centralizado no topo da barra lateral
- **Estrutura em 3 se√ß√µes**: Estrat√©gias Tradicionais, Previs√µes ML, Estrat√©gias Combinadas

**Sistema de Prefer√™ncias Configur√°veis**
- 6 tipos de apostas configur√°veis pelo usu√°rio
- Interface visual com switches on/off por categoria
- Sincroniza√ß√£o em tempo real via WebSocket
- Persist√™ncia no banco de dados

### ‚úÖ Tipos de Apostas Dispon√≠veis

| Tipo | Status Padr√£o | Pagamento | Descri√ß√£o |
|------|---------------|-----------|-----------|
| **N√∫meros Plenos** | ‚úÖ ATIVO | 35:1 | Apostas diretas em n√∫meros √∫nicos (0-36) |
| **Vizinhos** | ‚úÖ ATIVO | Vari√°vel | Grupos de n√∫meros vizinhos na roda f√≠sica |
| **D√∫zias** | ‚úÖ ATIVO | 2:1 | Grupos 1-12, 13-24, 25-36 |
| **Colunas** | ‚ùå INATIVO | 2:1 | Colunas verticais do tabuleiro |
| **Cores** | ‚ùå INATIVO | 1:1 | Vermelho vs Preto |
| **Par/√çmpar** | ‚ùå INATIVO | 1:1 | N√∫meros pares vs √≠mpares |

## Arquitetura Completa do Sistema

### üîê Sistema de Autentica√ß√£o e Controle de Acesso

**Componentes Principais:**
- **AuthProvider**: Contexto global de autentica√ß√£o
- **useAuth**: Hook para verificar usu√°rio e permiss√µes
- **FeatureGuard**: Componente que controla acesso a funcionalidades
- **PlanSelector**: Interface para sele√ß√£o e upgrade de planos
- **Badge**: Componente para exibir status dos planos

**Fluxo de Controle:**
```typescript
// Verifica√ß√£o de feature
const { hasFeature } = useAuth();
if (hasFeature('ia_externa_chatgpt')) {
  // Exibir funcionalidade
} else {
  // Mostrar prompt de upgrade
}
```

**Configura√ß√£o de Features por Plano:**
```typescript
export const PLAN_FEATURES = {
  basico: ['mesa_roleta', 'entrada_manual', 'resultados_recentes'],
  intermediario: [...basico, 'analise_padroes', 'ml_analyzer'],
  completo: [...intermediario, 'ia_externa_chatgpt', 'dashboard_customizavel']
};
```

### üéØ Arquitetura Frontend

**Framework e Tecnologias Core**
- **React 18** com TypeScript para m√°xima type safety
- **Wouter** para roteamento client-side leve e eficiente
- **TanStack Query v5** para gerenciamento de estado do servidor
- **Vite** como bundler e dev server com HMR

**Sistema de UI e Design**
- **Radix UI** como base para componentes acess√≠veis
- **shadcn/ui** para design system consistente
- **Tailwind CSS** com tema customizado para casino
- **Framer Motion** para anima√ß√µes suaves
- **Lucide React** para iconografia

**Estrutura de Componentes**
- **Layout responsivo** com sidebar e main content
- **Componentes modulares** reutiliz√°veis
- **Hooks customizados** para l√≥gica compartilhada
- **Context providers** para temas e configura√ß√µes

### üîß Arquitetura Backend

**Servidor e API**
- **Node.js** com runtime nativo ESM
- **Express.js** para servidor HTTP robusto
- **TypeScript** compilado via tsx para desenvolvimento
- **RESTful API** com endpoints padronizados
- **WebSocket Server** para comunica√ß√£o em tempo real

**Camada de Dados**
- **PostgreSQL** como banco principal (produ√ß√£o)
- **In-Memory Storage** para desenvolvimento r√°pido
- **Drizzle ORM** para queries type-safe
- **Schema validation** com Zod para dados de entrada

**Processamento de Dados**
- **Pattern Analysis Engine** com algoritmos estat√≠sticos
- **Strategy Generation** baseada em IA
- **Real-time Processing** de eventos da roleta
- **Session Management** para controle de estado

## üìã Componentes Principais Detalhados

### üß† Engine de An√°lise de Padr√µes (Pattern Analysis)

**Algoritmos Implementados**
- **Hot Numbers**: Detecta n√∫meros que aparecem acima da frequ√™ncia esperada
- **Dozen Patterns**: Analisa sequ√™ncias nas d√∫zias (1-12, 13-24, 25-36)
- **Color Trends**: Identifica tend√™ncias de vermelho/preto consecutivos
- **Parity Analysis**: Monitora padr√µes de n√∫meros pares/√≠mpares
- **Cold Numbers**: Rastreia n√∫meros que n√£o saem h√° muito tempo

**M√©tricas de Confian√ßa**
- **Probabilidade**: C√°lculo baseado em frequ√™ncia hist√≥rica
- **Confian√ßa**: N√≠vel de certeza estat√≠stica (0.0 - 1.0)
- **Occorr√™ncias**: N√∫mero total de apari√ß√µes do padr√£o
- **Taxa de Sucesso**: Percentual de acertos das previs√µes

### üîÑ Sistema de WebSocket Real-time

**Tipos de Mensagens**
```typescript
// Conex√£o inicial
{ type: 'connection', message: 'Connected to roulette system' }

// Novo resultado
{ type: 'new_result', data: { result, patterns, strategies } }

// Estrat√©gia atualizada  
{ type: 'strategy_updated', data: strategy }

// Padr√£o detectado
{ type: 'pattern_detected', data: pattern }
```

**Gerenciamento de Conex√µes**
- **Auto-reconnect**: Reconex√£o autom√°tica em caso de falha
- **Heartbeat**: Monitoramento de conex√£o ativa
- **Broadcast**: Envio para m√∫ltiplos clientes conectados
- **Error Handling**: Tratamento robusto de erros de rede

### üé≤ Interface da Mesa de Roleta

**Layout Europeu Aut√™ntico**
- **37 n√∫meros** (0-36) com cores corretas
- **Posicionamento exato** conforme roleta real
- **Intera√ß√£o por clique** em cada n√∫mero
- **Feedback visual** imediato para sele√ß√µes

**Estados Visuais**
- **√öltimo resultado**: Destaque dourado no n√∫mero sorteado
- **N√∫meros quentes**: Indica√ß√£o visual de alta frequ√™ncia
- **Anima√ß√µes**: Transi√ß√µes suaves para engajamento
- **Responsividade**: Adapta√ß√£o para mobile e desktop

### ‚öôÔ∏è Sistema de Gerenciamento de Estrat√©gias

**Tipos de Estrat√©gias**
1. **N√∫meros Plenos (Straight-up)**
   - Exatamente 7 n√∫meros por rodada
   - Pagamento: 35:1
   - Baseado em an√°lise de n√∫meros quentes/frios

2. **Vizinhos (Neighbors)**
   - At√© 21 n√∫meros por estrat√©gia
   - Cobertura de setores da roda f√≠sica
   - Pagamento vari√°vel por posi√ß√£o

**L√≥gica de Controle**
- **Tentativas**: M√°ximo 5 por ciclo de estrat√©gia
- **Rec√°lculo**: Nova estrat√©gia ap√≥s falha completa
- **Valida√ß√£o**: M√≠nimo 10 resultados para ativa√ß√£o
- **Persist√™ncia**: Estado salvo no banco de dados

### üîÑ Fluxo de An√°lise com IA Externa

```mermaid
graph TD
    A[Usu√°rio clica "Analisar com IA"] --> B{15+ n√∫meros?}
    B -->|N√£o| C[Erro: dados insuficientes]
    B -->|Sim| D[Preparar sequ√™ncia]
    D --> E[Chamar OpenAI GPT-4o]
    D --> F[Chamar Claude-4]
    E --> G[Processar resposta JSON]
    F --> H[Processar resposta JSON]
    G --> I[Combinar insights]
    H --> I
    I --> J[Exibir an√°lises no painel]
    J --> K[Permitir c√≥pia de n√∫meros]
```

**Vantagens da IA Externa:**
- **An√°lise de linguagem natural** mais sofisticada
- **Reconhecimento de padr√µes complexos** que humanos n√£o veem
- **Insights √∫nicos** baseados em "intui√ß√£o" da IA
- **Explica√ß√µes detalhadas** do racioc√≠nio por tr√°s de cada recomenda√ß√£o
- **Consenso entre m√∫ltiplas IAs** para maior confiabilidade

## üîÑ Workflows e Fluxos de Dados Completos

### üì• Fluxo de Entrada de Dados

```mermaid
graph TD
    A[Usu√°rio clica n√∫mero] --> B[Valida√ß√£o frontend]
    C[Entrada manual] --> B
    B --> D[POST /api/results]
    D --> E[Valida√ß√£o Zod backend]
    E --> F[C√°lculo propriedades]
    F --> G[Salvar no banco]
    G --> H[An√°lise de padr√µes]
    H --> I[Verifica√ß√£o estrat√©gias]
    I --> J[WebSocket broadcast]
    J --> K[Atualiza√ß√£o frontend]
```

**Etapas Detalhadas**
1. **Captura**: Clique na mesa ou entrada manual
2. **Valida√ß√£o**: Verifica√ß√£o de n√∫mero v√°lido (0-36)
3. **Sess√£o**: Confirma√ß√£o de sess√£o ativa
4. **Propriedades**: C√°lculo de cor, d√∫zia, coluna, paridade
5. **Persist√™ncia**: Salvamento com timestamp
6. **An√°lise**: Execu√ß√£o de algoritmos de padr√µes
7. **Estrat√©gias**: Verifica√ß√£o de acertos/tentativas
8. **Broadcast**: Notifica√ß√£o em tempo real
9. **UI Update**: Invalida√ß√£o de cache e re-render

### üéØ Fluxo de An√°lise de Padr√µes

```mermaid
graph LR
    A[Novo Resultado] --> B[Buscar Hist√≥rico]
    B --> C[An√°lise Hot Numbers]
    B --> D[An√°lise Dozens]
    B --> E[An√°lise Colors]
    C --> F[C√°lculo Probabilidade]
    D --> F
    E --> F
    F --> G[Filtro Confian√ßa > 80%]
    G --> H[Criar Alerta]
    H --> I[Salvar Padr√£o]
    I --> J[Broadcast]
```

### ‚öôÔ∏è Fluxo de Estrat√©gias

```mermaid
graph TD
    A[Resultado processado] --> B{10+ resultados?}
    B -->|N√£o| C[Aguardar mais dados]
    B -->|Sim| D[Verificar estrat√©gias ativas]
    D --> E{N√∫mero na estrat√©gia?}
    E -->|Sim| F[Acerto! Reset tentativas]
    E -->|N√£o| G[Incrementar tentativa]
    G --> H{5 tentativas?}
    H -->|N√£o| I[Continuar]
    H -->|Sim| J[Recalcular estrat√©gia]
    F --> K[Criar alerta sucesso]
    J --> L[Gerar novos n√∫meros]
    L --> M[Reset tentativas]
```

### üîÑ Fluxo de Prefer√™ncias de Apostas

```mermaid
graph LR
    A[User toggle switch] --> B[PUT /api/betting-preferences/:id]
    B --> C[Valida√ß√£o dados]
    C --> D[Update banco]
    D --> E[Broadcast WebSocket]
    E --> F[Update UI switches]
    F --> G[Criar alerta mudan√ßa]
```

## üìÅ Estrutura Completa de Arquivos

### Frontend (`client/`)
```
client/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/          # Componentes reutiliz√°veis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/             # Componentes base shadcn/ui
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ roulette-table.tsx      # Mesa de roleta interativa
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pattern-analysis.tsx    # Painel de an√°lise
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ strategy-panel.tsx      # Gerenciamento estrat√©gias
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ betting-preferences.tsx # Configura√ß√£o apostas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stats-panel.tsx         # Estat√≠sticas gerais
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ alerts-panel.tsx        # Sistema de alertas
‚îÇ   ‚îú‚îÄ‚îÄ hooks/              # Custom hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-websocket.ts        # WebSocket connection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.tsx          # Detec√ß√£o mobile
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts            # Sistema toast
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # Utilit√°rios e configura√ß√µes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queryClient.ts          # Configura√ß√£o TanStack Query
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                # Fun√ß√µes utilit√°rias
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pattern-analyzer.ts     # An√°lise client-side
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ roulette-utils.ts       # Utilit√°rios da roleta
‚îÇ   ‚îú‚îÄ‚îÄ pages/              # P√°ginas da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ roulette-dashboard.tsx  # Dashboard principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ not-found.tsx           # P√°gina 404
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx             # Componente root
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx            # Entry point
‚îÇ   ‚îî‚îÄ‚îÄ index.css           # Estilos globais
‚îî‚îÄ‚îÄ index.html              # Template HTML
```

### Backend (`server/`)
```
server/
‚îú‚îÄ‚îÄ index.ts                # Servidor Express principal
‚îú‚îÄ‚îÄ routes.ts               # Defini√ß√£o de rotas API
‚îú‚îÄ‚îÄ storage.ts              # Interface de armazenamento
‚îî‚îÄ‚îÄ vite.ts                 # Integra√ß√£o com Vite
```

### Shared (`shared/`)
```
shared/
‚îî‚îÄ‚îÄ schema.ts               # Schemas TypeScript compartilhados
```

### Configura√ß√µes Raiz
```
‚îú‚îÄ‚îÄ components.json         # Configura√ß√£o shadcn/ui
‚îú‚îÄ‚îÄ drizzle.config.ts       # Configura√ß√£o Drizzle ORM
‚îú‚îÄ‚îÄ package.json            # Depend√™ncias e scripts
‚îú‚îÄ‚îÄ tailwind.config.ts      # Configura√ß√£o Tailwind
‚îú‚îÄ‚îÄ tsconfig.json           # Configura√ß√£o TypeScript
‚îú‚îÄ‚îÄ vite.config.ts          # Configura√ß√£o Vite
‚îî‚îÄ‚îÄ replit.md               # Esta documenta√ß√£o
```

## üåê APIs REST Detalhadas

### üìä Endpoints de Dados

| M√©todo | Endpoint | Descri√ß√£o | Corpo |
|--------|----------|-----------|-------|
| `GET` | `/api/results` | Lista resultados recentes | - |
| `POST` | `/api/results` | Adiciona novo resultado | `{number: number, sessionId: string}` |
| `GET` | `/api/patterns` | Padr√µes ativos detectados | - |
| `GET` | `/api/strategies` | Estrat√©gias configuradas | - |
| `PUT` | `/api/strategies/:id` | Atualiza estrat√©gia | `{isActive: boolean}` |
| `GET` | `/api/alerts` | Alertas recentes | - |
| `GET` | `/api/session/stats` | Estat√≠sticas da sess√£o | - |

### ‚öôÔ∏è Endpoints de Configura√ß√£o

| M√©todo | Endpoint | Descri√ß√£o | Corpo |
|--------|----------|-----------|-------|
| `GET` | `/api/betting-preferences` | Lista prefer√™ncias | - |
| `PUT` | `/api/betting-preferences/:id` | Atualiza prefer√™ncia | `{enabled: boolean}` |

### üîå WebSocket Events

| Event | Dire√ß√£o | Payload | Descri√ß√£o |
|-------|---------|---------|-----------|
| `connection` | Server‚ÜíClient | `{type: 'connection', message: string}` | Confirma√ß√£o conex√£o |
| `new_result` | Server‚ÜíClient | `{type: 'new_result', data: {result, patterns, strategies}}` | Novo resultado processado |
| `strategy_updated` | Server‚ÜíClient | `{type: 'strategy_updated', data: strategy}` | Estrat√©gia modificada |
| `pattern_detected` | Server‚ÜíClient | `{type: 'pattern_detected', data: pattern}` | Padr√£o identificado |

## üì¶ Depend√™ncias Principais

### üéØ Frontend Core
- **React 18.2** - Framework UI moderno
- **TypeScript 5.0** - Type safety completo
- **@tanstack/react-query 5.0** - Gerenciamento estado servidor
- **wouter 3.0** - Roteamento leve
- **vite 5.0** - Build tool r√°pido

### üé® UI e Styling
- **@radix-ui/*** - Componentes acess√≠veis
- **tailwindcss 3.4** - Framework CSS utilit√°rio
- **framer-motion 10.0** - Anima√ß√µes fluidas
- **lucide-react 0.400** - √çcones modernos
- **class-variance-authority** - Variantes componentes

### üîß Backend Core
- **express 4.18** - Servidor HTTP robusto
- **ws 8.14** - WebSocket server
- **drizzle-orm 0.29** - ORM type-safe
- **zod 3.22** - Valida√ß√£o runtime
- **@neondatabase/serverless** - Driver PostgreSQL

### üõ†Ô∏è Development Tools
- **tsx 4.0** - Execu√ß√£o TypeScript
- **drizzle-kit 0.20** - Migra√ß√µes banco
- **tailwindcss/typography** - Tipografia
- **@types/*** - Defini√ß√µes TypeScript

## üöÄ Execu√ß√£o e Deployment

### üîß Ambiente de Desenvolvimento

**Configura√ß√£o Local**
```bash
# Instalar depend√™ncias
npm install

# Iniciar servidor de desenvolvimento
npm run dev
```

**Workflow Replit**
- **Comando**: `npm run dev`
- **Porta**: 5000 (Express + Vite unified)
- **Hot Reload**: Autom√°tico via tsx e Vite HMR
- **WebSocket**: Path `/ws` para evitar conflito com Vite

**Vari√°veis de Ambiente**
```env
NODE_ENV=development
DATABASE_URL=postgresql://...  # Apenas para produ√ß√£o
VITE_WS_URL=ws://localhost:5000/ws  # Frontend
```

### üåê Produ√ß√£o e Deployment

**Build Process**
```bash
# Build frontend
npm run build

# Build backend (se necess√°rio)
npm run build:server
```

**Replit Deployment**
- **Auto-deployment**: Via bot√£o Deploy no Replit
- **Domain**: `.replit.app` ou dom√≠nio customizado
- **SSL/TLS**: Autom√°tico via Replit infrastructure
- **Health Checks**: Configura√ß√£o autom√°tica

### üóÑÔ∏è Configura√ß√£o de Banco

**Desenvolvimento**
- **Storage**: In-memory (MemStorage)
- **Persist√™ncia**: Session-based, n√£o persiste entre reinicializa√ß√µes
- **Performance**: Extremamente r√°pido para testes

**Produ√ß√£o**
- **Database**: Neon PostgreSQL Serverless
- **Connection**: Via `@neondatabase/serverless`
- **Migrations**: Drizzle Kit para schema management
- **Backup**: Autom√°tico via Neon

## üìã Casos de Uso e Workflows Operacionais

### üéØ Workflow do Usu√°rio Final - SIMPLIFICADO

1. **In√≠cio de Sess√£o**
   - Usu√°rio acessa dashboard
   - Clica "Iniciar Sess√£o"
   - Sistema ativa captura de dados

2. **Entrada de Resultados - APENAS CLIQUES**
   - **√öNICA FORMA**: Clique direto nos n√∫meros da mesa de roleta
   - **Valida√ß√£o autom√°tica**: N√∫meros 0-36 aceitos
   - **Interface limpa**: Sem campos de entrada manual

3. **An√°lise Progressiva**
   - **1-9 resultados**: Sistema coleta dados
   - **10¬∫ resultado**: Estrat√©gias se ativam automaticamente
   - **An√°lise cont√≠nua**: Padr√µes detectados em tempo real

4. **Monitoramento de Estrat√©gias**
   - Visualiza√ß√£o de n√∫meros recomendados
   - Acompanhamento de tentativas (1/5, 2/5, etc.)
   - Rec√°lculo autom√°tico ap√≥s 5 falhas

5. **Configura√ß√£o Personalizada**
   - Ativar/desativar tipos de apostas
   - Ajustar prefer√™ncias via painel
   - Receber alertas customizados

### üîÑ Workflows Administrativos

**Monitoramento do Sistema**
- Logs em tempo real via console
- Status de conex√£o WebSocket
- M√©tricas de performance da API

**Manuten√ß√£o de Dados**
- Limpeza peri√≥dica de sess√µes antigas
- Backup de padr√µes importantes
- Otimiza√ß√£o de queries de an√°lise

**Expans√£o de Funcionalidades**
- Novos algoritmos de padr√µes
- Tipos adicionais de estrat√©gias
- Integra√ß√£o com APIs externas

## üéì Guia de Desenvolvimento

### üìù Adicionando Novos Padr√µes

1. **Implementar Algoritmo**
   ```typescript
   // Em PatternAnalyzer.ts
   private static findNewPattern(results: RouletteResult[]): any[] {
     // L√≥gica do algoritmo
     return patterns;
   }
   ```

2. **Registrar no Engine**
   ```typescript
   // Adicionar em analyzePatterns()
   patterns.push(...this.findNewPattern(results));
   ```

3. **Configurar Alertas**
   ```typescript
   // Definir threshold de confian√ßa
   if (pattern.probability >= THRESHOLD) {
     // Criar alerta
   }
   ```

### üîß Adicionando Novas Estrat√©gias

1. **Definir Tipo no Schema**
   ```typescript
   // Em shared/schema.ts
   export const strategyTypeEnum = pgEnum('strategy_type', [
     'straight_up', 'neighbors', 'new_strategy'
   ]);
   ```

2. **Implementar L√≥gica**
   ```typescript
   // Em routes.ts
   if (strategy.type === 'new_strategy') {
     newNumbers = generateNewStrategyNumbers(recentResults);
   }
   ```

3. **Atualizar Interface**
   ```typescript
   // Em strategy-panel.tsx
   // Adicionar renderiza√ß√£o espec√≠fica
   ```

### üé® Customiza√ß√£o de UI

**Tema e Cores**
- Modificar `tailwind.config.ts` para cores personalizadas
- Ajustar vari√°veis CSS em `index.css`
- Usar tokens de design consistentes

**Componentes Novos**
- Seguir padr√£o shadcn/ui para consist√™ncia
- Implementar responsive design
- Adicionar anima√ß√µes com Framer Motion

**Layout Responsivo**
- Mobile-first approach
- Breakpoints padr√£o Tailwind
- Componentes adaptativos automaticamente

## üìã Funcionalidades Implementadas Detalhadas

### üéØ Sistema Atual Funcionando (29 Julho 2025)

**Status de Desenvolvimento**:
- ‚úÖ Sistema base totalmente funcional
- ‚úÖ Todas as 3 fases do roadmap implementadas
- ‚úÖ 25 n√∫meros de teste populados para demonstra√ß√£o
- ‚úÖ Previs√µes ML ativadas e funcionando
- ‚úÖ Painel de recomenda√ß√µes no topo da barra lateral

### üéØ Fase 1: Machine Learning Integration - ‚úÖ COMPLETA

**Funcionalidades Implementadas**:
- **ML Analyzer Engine**: Sistema avan√ßado com algoritmos Ensemble, Markov e Bayesian
- **Confidence Scoring**: M√∫ltiplos fatores (frequ√™ncia, rec√™ncia, tend√™ncia, entropy)
- **Previs√µes Top 10**: N√∫meros mais prov√°veis com percentuais ML
- **Categoriza√ß√£o Autom√°tica**: hot/cold/neutral com thresholds adaptativos
- **An√°lise Temporal**: Janelas m√≥veis e decaimento temporal
- **Painel Visual**: Se√ß√£o roxa dedicada "Previs√µes de IA (L√≥gica ML Avan√ßada)"

**Localiza√ß√£o das Previs√µes ML**:
- Dashboard ‚Üí Barra lateral direita ‚Üí Topo
- Painel "üéØ RECOMENDA√á√ïES DE APOSTAS"
- Se√ß√£o 2 (roxa): "Previs√µes de IA (L√≥gica ML Avan√ßada)"
- **N√∫meros Plenos**: Top 10 com percentuais
- **Vizinhos ML**: 3 setores da roda f√≠sica (5 n√∫meros cada)
- Ativa ap√≥s 20+ resultados (atualmente: 25 resultados)

### üéØ Fase 2: Estrat√©gias Combinadas - ‚úÖ COMPLETA  

**Funcionalidades Implementadas**:
- **Sistema de Portf√≥lio**: Otimiza√ß√£o autom√°tica de aloca√ß√µes entre tipos de apostas
- **Estrat√©gia Balanceada**: 50% n√∫meros quentes + 25% vizinhos frios + 15% d√∫zias + 10% hedge
- **An√°lise de Risco/Retorno**: C√°lculo de retorno esperado e m√©tricas de confian√ßa
- **Integra√ß√£o ML**: Estrat√©gias baseadas em previs√µes do ML Analyzer
- **Interface Visual**: Painel dedicado com distribui√ß√£o percentual e explica√ß√µes

**Resultados Alcan√ßados**:
- Diversifica√ß√£o autom√°tica de apostas baseada em IA
- Redu√ß√£o de risco atrav√©s de estrat√©gias combinadas
- Interface intuitiva com visualiza√ß√£o de aloca√ß√µes e m√©tricas

### üéØ Fase 3: Interface e Experi√™ncia Aprimorada - ‚úÖ COMPLETA

**Funcionalidades Implementadas**:
- **Gr√°ficos Interativos Avan√ßados**: 4 visualiza√ß√µes diferentes (Frequ√™ncia, Tend√™ncias, Setores, Sequ√™ncias)
- **Dashboard Customiz√°vel**: Sistema completo de personaliza√ß√£o com layouts predefinidos
- **Altern√¢ncia de Modos**: Bot√£o no header para alternar entre dashboard padr√£o e customiz√°vel
- **Layouts Prontos**: 4 configura√ß√µes (Iniciante, Avan√ßado, Analista, Estrategista)
- **Organiza√ß√£o por Categorias**: Pain√©is agrupados em An√°lise, Estrat√©gias, Estat√≠sticas, Visualiza√ß√£o

**Resultados Alcan√ßados**:
- Interface totalmente personaliz√°vel pelo usu√°rio
- Experi√™ncia adaptada para diferentes perfis de usu√°rio
- Visualiza√ß√µes avan√ßadas com an√°lise de setores da roda e sequ√™ncias
- Dashboard responsivo com reorganiza√ß√£o flex√≠vel

## üìñ Guia de Uso do Sistema - INTERFACE SIMPLIFICADA

### üéØ Como Usar as Previs√µes de IA

**Passo 1: Iniciar Sess√£o**
1. Acesse o dashboard da roleta
2. Clique em "Iniciar Sess√£o" na mesa
3. Sistema estar√° pronto para receber n√∫meros

**Passo 2: Inserir Resultados - APENAS CLIQUES**
- **√öNICA FORMA**: Clique diretamente nos n√∫meros da mesa visual
- **Valida√ß√£o autom√°tica**: N√∫meros 0-36 aceitos instantaneamente
- **Interface limpa**: Sem campos de entrada manual

**Passo 3: Aguardar Ativa√ß√£o das Previs√µes ML**
- **10+ n√∫meros**: Estrat√©gias tradicionais ativam (se√ß√£o azul)
- **20+ n√∫meros**: Previs√µes ML ativam (se√ß√£o roxa)
- **25+ n√∫meros**: Estrat√©gias combinadas ativam (se√ß√£o verde)

**Passo 4: Localizar as Previs√µes ML**
- V√° para a **barra lateral direita**
- Procure o painel **"üéØ RECOMENDA√á√ïES DE APOSTAS"** no topo
- Na se√ß√£o **roxa** "2. Previs√µes de IA (L√≥gica ML Avan√ßada)"
- Ver√° os **Top 10 n√∫meros** com percentuais de probabilidade

**Passo 5: Usar as Recomenda√ß√µes**
- N√∫meros s√£o mostrados com cores da roleta real
- Percentuais indicam probabilidade ML calculada
- Bot√£o "Copiar Top 10" para usar em outras plataformas
- Debug mostra quantas previs√µes foram geradas

### üéØ Estrutura do Painel de Recomenda√ß√µes

**Se√ß√£o 1 (Azul)**: Estrat√©gias Tradicionais (10+ n√∫meros)
- N√∫meros Plenos: 7 n√∫meros diretos
- Vizinhos: Grupos da roda f√≠sica

**Se√ß√£o 2 (Roxa)**: Previs√µes de IA (20+ n√∫meros) ‚≠ê
- **Top 10 n√∫meros** mais prov√°veis via ML
- **Vizinhos ML**: Top 3 setores da roda f√≠sica baseados em IA
- **Algoritmos**: Ensemble, Markov, Bayesian
- **Percentuais** de confian√ßa para cada n√∫mero/setor
- **Visualiza√ß√£o**: N√∫meros centrais destacados com anel roxo

**Se√ß√£o 3 (Verde)**: Estrat√©gias Combinadas (25+ n√∫meros)
- Portfolio otimizado de apostas
- Distribui√ß√£o percentual autom√°tica
- M√©tricas de risco/retorno

## üöÄ Pr√≥ximos Passos de Evolu√ß√£o (Futuras Implementa√ß√µes)

### 1. **Expans√£o de Machine Learning**

#### Deep Learning Avan√ßado
**Implementa√ß√£o T√©cnica**:
- **Redes Neurais LSTM**: Para capturar padr√µes temporais de longo prazo
- **Ensemble Methods**: Combinar m√∫ltiplos algoritmos para maior precis√£o
- **Feature Engineering Avan√ßado**: Vari√°veis como vizinhan√ßa f√≠sica, padr√µes de setores
- **Auto-ML**: Sistema que treina e otimiza modelos automaticamente

**Benef√≠cios Esperados**: Precis√£o 80-90% nas previs√µes, detec√ß√£o de padr√µes complexos

#### An√°lise de Sequ√™ncias Avan√ßada
**T√©cnicas Espec√≠ficas**:
- **Cadeias de Markov de Ordem Superior**: Analisar depend√™ncias at√© 5-7 n√∫meros anteriores
- **An√°lise de Fourier**: Detectar periodicidades ocultas nas sequ√™ncias
- **Clustering Temporal**: Agrupar per√≠odos similares para identificar "fases" da roleta
- **An√°lise de Entropia**: Medir o grau de aleatoriedade e detectar desvios

#### Probabilidades Bayesianas
**Implementa√ß√£o**:
- **Prior Beliefs**: Usar conhecimento hist√≥rico como base inicial
- **Likelihood Updates**: Atualizar probabilidades conforme novos resultados
- **Posterior Distribution**: Calcular probabilidades finais com intervalos de confian√ßa
- **Monte Carlo Sampling**: Simular milhares de cen√°rios para validar previs√µes

### 2. **Expans√£o de Estrat√©gias Avan√ßadas**

#### Estrat√©gias Combinadas
**Algoritmo Proposto**:
- **An√°lise Multi-dimensional**: Avaliar n√∫meros plenos + vizinhos + d√∫zias simultaneamente
- **Otimiza√ß√£o de Portfolio**: Distribuir apostas para maximizar retorno/risco
- **Adapta√ß√£o Din√¢mica**: Mudar propor√ß√µes baseado na performance recente
- **Correla√ß√£o Cruzada**: Identificar quando diferentes estrat√©gias se complementam

**Exemplo**: 60% n√∫meros plenos quentes + 30% vizinhos de n√∫meros frios + 10% d√∫zias com padr√µes emergentes

#### Martingale Inteligente
**Inova√ß√µes**:
- **Progress√£o Adaptativa**: Aumentar apostas baseado na confian√ßa da IA, n√£o apenas em perdas
- **Stop-Loss Inteligente**: Parar progress√£o quando padr√µes indicam mudan√ßa de fase
- **Diversifica√ß√£o de Risco**: Aplicar Martingale em m√∫ltiplas estrat√©gias simultaneamente
- **Simulation Monte Carlo**: Testar estrat√©gia em milhares de cen√°rios antes de aplicar

#### Setores da Roda
**Implementa√ß√£o**:
- **Mapeamento F√≠sico**: Dividir roda em 8 setores de aproximadamente 4-5 n√∫meros
- **An√°lise de Vizinhan√ßa**: Detectar quando n√∫meros pr√≥ximos fisicamente saem em sequ√™ncia
- **Bias Detection**: Identificar tend√™ncias mec√¢nicas da roda espec√≠fica
- **Cobertura Otimizada**: Calcular melhor combina√ß√£o de setores para cobrir

### 3. **Interface e Experi√™ncia Aprimorada**

#### Modo Escuro/Claro Completo
**Design Espec√≠fico**:
- **Tema Casino (Escuro)**: Verde escuro, dourado, vermelho/preto cl√°ssicos
- **Tema Profissional (Claro)**: Azul corporativo, cinzas suaves, acentos verdes
- **Tema Personalizado**: Usu√°rio escolhe cores prim√°rias e secund√°rias
- **Transi√ß√µes Suaves**: Anima√ß√µes ao alternar temas

#### Dashboard Customiz√°vel
**Funcionalidades**:
- **Drag & Drop**: Reorganizar pain√©is livremente
- **Redimensionamento**: Ajustar tamanho de cada se√ß√£o
- **Layouts Predefinidos**: "Iniciante", "Avan√ßado", "Analista", "Estrategista"
- **Visibilidade**: Mostrar/ocultar pain√©is espec√≠ficos

#### Gr√°ficos Interativos Avan√ßados
**Visualiza√ß√µes**:
- **Mapa de Calor**: Frequ√™ncia por n√∫mero em grid visual
- **Linha do Tempo**: Sequ√™ncia de n√∫meros com cores e padr√µes
- **An√°lise de Tend√™ncias**: Linhas de evolu√ß√£o dos padr√µes
- **Correla√ß√£o Matrix**: Relacionamento entre diferentes m√©tricas

**Tecnologia**: Recharts + D3.js + Canvas + WebGL para performance m√°xima

#### Hist√≥rico Detalhado
**Features**:
- **Sess√µes Anteriores**: Hist√≥rico completo com estat√≠sticas comparativas
- **Exporta√ß√£o**: CSV, Excel, PDF com relat√≥rios profissionais
- **An√°lise Retroativa**: Simula√ß√µes "E se" para estrat√©gias diferentes
- **Timeline Visual**: Navega√ß√£o intuitiva por per√≠odos

## üéØ Prioridade de Implementa√ß√£o

**Fase 1**: Machine Learning Integration (maior impacto na precis√£o)
**Fase 2**: Estrat√©gias Combinadas (diferencial competitivo)
**Fase 3**: Dashboard Customiz√°vel (experi√™ncia do usu√°rio)

---

## üéØ Resumo Executivo

O **Sistema de An√°lise de Padr√µes de Roleta com IA** √© uma aplica√ß√£o completa e robusta que oferece:

- **Interface profissional** com mesa de roleta visual aut√™ntica
- **An√°lise em tempo real** de padr√µes estat√≠sticos avan√ßados  
- **Estrat√©gias autom√°ticas** baseadas em algoritmos de IA
- **Sistema configur√°vel** de prefer√™ncias de apostas
- **Arquitetura moderna** com TypeScript, React e PostgreSQL
- **Performance otimizada** com WebSocket e cache inteligente

A aplica√ß√£o est√° **totalmente funcional**, **bem documentada** e **pronta para evolu√ß√£o** com os pr√≥ximos passos detalhados acima.